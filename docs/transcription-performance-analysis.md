# 音声認識パフォーマンス分析

## 概要

音声認識の高速化について検討した結果をまとめる。

## 現状のパフォーマンス

- 音声入力: 10-15秒程度
- API応答時間: 2-3秒
- 使用API: OpenAI Whisper API (`whisper-1`)

## 検討した高速化手法

### チャンク化・並列処理

音声を複数のチャンクに分割し、並列でWhisper APIに送信する方法を検討した。

#### 課題

1. **レート制限**
   - Whisper APIのデフォルトは50 RPM（リクエスト/分）
   - 並列リクエストは実質8リクエスト程度で制限される報告あり

2. **音声分割の難しさ**
   - 単語の途中で切ると認識精度が低下する
   - 無音検出で適切な分割点を見つける処理が必要
   - チャンク間で文脈が失われる（文が途中で切れると精度低下）

3. **オーバーヘッド**
   - API呼び出しのセットアップ・結果結合のコストがかかる
   - 短い音声では並列化の効果よりオーバーヘッドが大きい

#### 結論

10-15秒程度の音声では、チャンク化・並列処理は効果がないか、むしろ遅くなる可能性が高い。

### 代替手法（将来の検討用）

| 方法 | 特徴 | 期待される改善 |
|------|------|---------------|
| Groq Whisper API | Whisper互換、高速 | 1秒以下になる可能性 |
| faster-whisper（ローカル） | オフライン動作、GPU活用 | GPU有りなら0.5秒程度 |
| ストリーミング認識（Deepgram等） | リアルタイム認識 | 待ち時間なし |

## 最終判断

現状の2-3秒の応答時間は「キーを離す → ペースト」の流れで十分自然な待ち時間であり、高速化の優先度は低いと判断した。

将来的に長時間の音声入力に対応する場合や、より高速な応答が求められる場合は、Groq Whisper APIやローカルWhisperモデルの導入を検討する。

## 参考

- [OpenAI Rate Limits](https://platform.openai.com/docs/guides/rate-limits)
- [Whisper API Limits - OpenAI Community](https://community.openai.com/t/whisper-api-limits-transcriptions/167507)
